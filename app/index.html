<!DOCTYPE html>

<html>
<head>
    <meta charset="UTF-8">
    <title>LunaIRC</title>
    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.css" />
    <link rel="stylesheet" href="css/style.css" />
</head>

<body>
    <div id="main-container" class="container-fluid" data-bind="style: { height: height() + 'px' }">
        <div class="row" style="height: 80%">
            <div class="col-xs-2">
                <ul id="target-list" class="nav nav-pills nav-stacked" data-bind="foreach: targets">
                    <li roll="presentation" data-bind="css: { active: $parent.isCurrentTarget($data) }">
                        <a href="#" data-bind="click: $parent.selectTarget">
                            <span data-bind="text: name"></span>
                            <span
                                class="badge pull-right"
                                data-bind="text: count, style: { display: (count() > 0) ? 'inline' : 'none' }"></span>
                        </a>
                    </li>
                </ul>
            </div>
            <div id="chat-area" class="col-xs-10" data-bind="foreach: currentTarget().lines">
                <div>
                    [<span data-bind="text: when().toLocaleTimeString()"></span>]
                    <span data-bind="text: message"></span>
                </div>
            </div>
        </div>
        <div class="row">
            <div id="server-nav" class="col-xs-2 btn-group btn-group-sm" role="group">
                <button
                    data-bind="click: openSettingsDialog"
                    class="glyphicon glyphicon-cog btn btn-default" 
                    label="Settings..."></button>
                <button
                    data-bind="click: openConnectDialog"
                    class="glyphicon glyphicon-plus btn btn-default"
                    label="Connect..."></button>
            </div>
            <div id="command-line" class="col-xs-10">
                <div class="input-group" data-bind="with: commandLine">
                    <input class="form-control" type="text" data-bind="textInput: input, event: { keypress: handleKeypress }" />
                    <span class="input-group-addon"><span class="glyphicon glyphicon-heart"></span></span>
                </div>
            </div>
        </div>
    </div>

    <div id="settings-dialog" class="modal fade" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title"><span class="glyphicon glyphicon-cog"></span> Settings</h4>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item active">
                            <a class="nav-link active" data-toggle="tab" href="#identity" role="tab">Identity</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" data-toggle="tab" href="#servers" role="tab">Servers</a>
                        </li>
                    </ul>
                    <form role="form">
                        <div class="tab-content">
                        
                            <div class="tab-pane active" id="identity" role="tabpanel">
                                <div class="form-group row">
                                    <label class="col-sm-2 col-form-label" for="nickname">Nick</label>
                                    <div class="col-sm-4">
                                        <input
                                            id="nickname"
                                            class="form-control" 
                                            type="text" 
                                            placeholder="Nick name" />
                                    </div>
                                    <label class="col-sm-2 col-form-label" for="username">User</label>
                                    <div class="col-sm-4">
                                        <input
                                            id="username"
                                            class="form-control"
                                            type="email" 
                                            placeholder="User name" />
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label" for="realname">Full Name</label>
                                    <div>
                                        <input
                                            id="realname"
                                            class="form-control"
                                            type="text"
                                            placeholder="Full name" />
                                    </div>
                                </div>
                            </div>

                            <div class="tab-pane" id="servers" role="tabpanel">
                                <p>Server tab goes here.</p>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    global.jQuery = require("jquery");
    global._ = require("lodash");
    
    require("bootstrap");
    require('./js/renderer.js')
</script>
</html>